import{Da as i,Ea as n,Fa as l,Ga as k,Hb as A,I as V,Ja as x,Jb as j,La as u,Lb as P,Mb as S,Ob as D,P as y,Pa as T,Pb as q,Q as N,Qa as M,Qb as G,Ra as R,Sb as I,T as g,Ta as s,Tb as Q,U as v,Va as U,Vb as K,Wb as B,ab as c,bc as J,cc as W,dc as _,ec as L,fa as F,fc as X,ga as r,gc as f,ha as h,hc as H,ic as Y,jc as Z,kc as $,rb as z,sa as p,ua as a,wb as O}from"./chunk-VDBOOTMS.js";var w=class{constructor(){this.user=new f,this.accessToken=""}};var C=class{constructor(){this.email="",this.password=""}};var E=class{constructor(){this.token="",this.user=new f,this.expiresAt=new Date}};var re=()=>({"border-radius":"10",height:"80px","background-color":"#FFFFFFF"}),ee=()=>({"border-radius":"10",height:"0px","background-color":"#FFFFFFF"}),te=()=>({"border-radius":"20",height:"45px","background-color":"#FFFFFFF"}),ae=()=>({"border-radius":"20",height:"40px","background-color":"#FFFFFFF"}),le=()=>({"border-radius":"20",height:"20px","background-color":"#FFFFFFF"}),ne=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275cmp=y({type:t,selectors:[["app-skelleton-login"]],decls:21,vars:21,consts:[[1,"d-flex","flex-column","h-100"],[1,"mb-4","mb-md-5"],[1,"d-block","auth-logo"],[3,"count","theme"],[1,"auth-content","my-auto"],[1,"text-center","mb-4"],[1,"mt-5","pt-2"],[1,"form-floating","form-floating-custom"],[1,"form-floating","form-floating-custom","mb-2","auth-pass-inputgroup"],[1,"mb-3"],[1,"text-center"]],template:function(o,m){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),l(3,"ngx-skeleton-loader",3),n()(),i(4,"div",4)(5,"div",5),l(6,"ngx-skeleton-loader",3)(7,"br")(8,"br")(9,"ngx-skeleton-loader",3),n(),i(10,"div",6)(11,"div",7),l(12,"ngx-skeleton-loader",3),n(),l(13,"br"),i(14,"div",8),l(15,"ngx-skeleton-loader",3),n(),l(16,"br"),i(17,"div",9),l(18,"ngx-skeleton-loader",3),n()()(),i(19,"div",10),l(20,"ngx-skeleton-loader",3),n()()),o&2&&(r(3),a("count",1)("theme",c(14,re)),r(3),a("count",1)("theme",c(15,ee)),r(3),a("count",1)("theme",c(16,ee)),r(3),a("count",1)("theme",c(17,te)),r(3),a("count",1)("theme",c(18,te)),r(3),a("count",1)("theme",c(19,ae)),r(2),a("count",1)("theme",c(20,le)))},dependencies:[Z]})}}return t})();var me=["loginVideo"];function de(t,d){t&1&&(i(0,"div",47)(1,"strong"),s(2,"*"),n(),s(3," El email no es valido "),n())}function ce(t,d){t&1&&(i(0,"div",47)(1,"strong"),s(2,"*"),n(),s(3," El email es requerido "),n())}function pe(t,d){t&1&&(i(0,"div",47)(1,"strong"),s(2,"*"),n(),s(3," La contrase\xF1a es requerida "),n())}function ue(t,d){if(t&1){let e=k();i(0,"div",48),s(1," Su inicio de sesion fallo, intentelo de nuevo "),i(2,"button",49),x("click",function(){g(e);let m=u(2);return v(m.logginError=!1)}),n()()}}function fe(t,d){t&1&&(i(0,"span"),s(1,"Ingresar"),n())}function ge(t,d){t&1&&(i(0,"span"),s(1,"Cargando "),l(2,"i",50),n())}function ve(t,d){if(t&1&&(i(0,"p",51),s(1),n()),t&2){let e=u(2);r(),U(" 2025 \xA9 ",e.companyName,"")}}function he(t,d){if(t&1){let e=k();i(0,"div",17)(1,"div",18)(2,"div",19),l(3,"img",20),n()(),i(4,"div",21)(5,"div",22)(6,"h5",23),s(7,"Portal de administraci\xF3n"),n(),i(8,"p",24),s(9,"\xA1Bienvenido de vuelta!"),n(),i(10,"h6",25),s(11,"Ingrese su email y contrase\xF1a para iniciar sesi\xF3n"),n()(),i(12,"form",26)(13,"div",27),l(14,"input",28),i(15,"label",29),s(16,"Email"),n(),i(17,"div",30),l(18,"i",31),n()(),p(19,de,4,0,"div",32)(20,ce,4,0,"div",32),l(21,"br"),i(22,"div",33),l(23,"input",34),i(24,"label",35),s(25,"Contrase\xF1a"),n(),i(26,"div",30),l(27,"i",36),n()(),p(28,pe,4,0,"div",32),l(29,"br"),p(30,ue,3,0,"div",37),i(31,"div",38)(32,"button",39),x("click",function(){g(e);let m=u();return v(m.signIn())}),p(33,fe,2,0,"span",14)(34,ge,3,0,"span",14),n()(),i(35,"div",40)(36,"span",41),s(37,"O"),n()(),i(38,"div",38)(39,"button",42),x("click",function(){g(e);let m=u();return v(m.signIn())}),i(40,"span"),l(41,"i",43),s(42," Continuar con Google "),n()()(),i(43,"div",38)(44,"button",42),x("click",function(){g(e);let m=u();return v(m.signIn())}),i(45,"span"),l(46,"i",44),s(47," Continuar con Windows "),n()()()()(),i(48,"div",45),p(49,ve,2,1,"p",46),n()()}if(t&2){let e=u();r(3),a("src",e.companyLogo,F),r(9),a("formGroup",e.form),r(7),a("ngIf",e.form.controls.userNumber.hasError("email")&&e.form.controls.userNumber.touched),r(),a("ngIf",e.form.controls.userNumber.hasError("required")&&e.form.controls.userNumber.touched),r(8),a("ngIf",e.form.controls.password.hasError("required")&&e.form.controls.password.touched),r(2),a("ngIf",e.logginError),r(3),a("ngIf",!e.loading),r(),a("ngIf",e.loading),r(15),a("ngIf",!e.charge)}}function xe(t,d){t&1&&l(0,"app-skelleton-login")}var oe=(()=>{class t{constructor(e,o,m,b){this.authService=e,this.router=o,this.userService=m,this.storageService=b,this.infoUser=new C,this.userResponse=new E,this.email="",this.charge=!1,this.loading=!1,this.logginError=!1,this.userDomain=L.apiUrl,this.user=new f,this.assets="assets/images/",this.companyName=L.companyName,this.companyLogo="assets/images/chronos-dark.png",this.companyInfo=new w,this.form=new G({userNumber:new I("",[S.required,S.email]),password:new I("",S.required)})}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.initializeVideo()},100)}initializeVideo(){if(this.loginVideo&&this.loginVideo.nativeElement){let e=this.loginVideo.nativeElement;e.muted=!0,e.loop=!0,e.autoplay=!0,e.playsInline=!0,e.addEventListener("loadstart",()=>{}),e.addEventListener("loadeddata",()=>{}),e.addEventListener("canplay",()=>{this.playVideo(e)}),e.addEventListener("error",o=>{}),e.load()}}playVideo(e){e.play().then(()=>{}).catch(o=>{console.error("Error al reproducir el video:",o),document.addEventListener("click",()=>{e.play().catch(m=>console.error("Error en reproducci\xF3n manual:",m))},{once:!0})})}signIn(){this.form.markAllAsTouched(),this.form.valid&&(this.infoUser.password=this.form.get("password")?.value,this.infoUser.email=this.form.get("userNumber")?.value,this.loading=!0,this.userService.login(this.infoUser).subscribe(e=>{console.log("data",e),this.userResponse=e,this.userResponse.token!=""&&(this.storageService.set(_._TOKEN,this.userResponse.token),this.storageService.set(_._USER,JSON.stringify(this.userResponse.user)),this.storageService.set(_._EXPIRES_AT,this.userResponse.expiresAt),this.storageService.set(_._USER_ROLE,this.userResponse.user.userRole),this.router.navigate(["/users"]))},e=>{this.logginError=!0,this.loading=!1}))}static{this.\u0275fac=function(o){return new(o||t)(h(H),h(A),h(Y),h(X))}}static{this.\u0275cmp=y({type:t,selectors:[["app-login"]],viewQuery:function(o,m){if(o&1&&T(me,5),o&2){let b;M(b=R())&&(m.loginVideo=b.first)}},decls:19,vars:3,consts:[["loginVideo",""],[1,"auth-page"],[1,"container-fluid","p-0"],[1,"row","g-0","align-items-center"],[1,"col-xxl-6","col-lg-6","col-md-6"],[1,"login-bg"],[1,"row","justify-content-center","align-items-center","g-0"],[1,"col-xl-7"],[1,"pt-2"],[1,"card","mb-0","mt-0","no-border","no-box-shadow","mt-5"],[1,"card-body"],[1,"auth-full-page-content","p-5","pb-0","d-flex","my-2"],[1,"w-100"],["class","d-flex flex-column  h-100 animated fadeIn fast",4,"ngIf"],[4,"ngIf"],[1,"auth-bg"],["autoplay","","muted","","loop","","playsinline","","preload","auto",1,"auth-video",3,"src"],[1,"d-flex","flex-column","h-100","animated","fadeIn","fast"],[1,"mb-4","mb-md-5"],[1,"d-block","m-0","auth-logo"],["alt","","height","105",1,"auth-logo-dark","me-start","text-left",3,"src"],[1,"auth-content","my-auto"],[1,"text-left"],[1,"mb-0","font-size-24","mb-3"],[1,"text-muted","mt-2","font-size-14"],[1,"font-size-14"],["novalidate","novalidate",1,"mt-4","pt-2",3,"formGroup"],[1,"form-floating","form-floating-custom","mb-2"],["type","text","autocomplete","username","placeholder","Email","formControlName","userNumber",1,"form-control"],["for","input-username"],[1,"form-floating-icon"],["data-eva","people-outline"],["class","invalid-feedback",4,"ngIf"],[1,"form-floating","form-floating-custom","mb-2","auth-pass-inputgroup"],["type","password","autocomplete","current-password","name","current-password","placeholder","Contrase\xF1a","formControlName","password",1,"form-control","pe-5"],["for","password-input"],["data-eva","lock-outline"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[1,"mb-3"],["type","submit",1,"btn","btn-dark","w-100","waves-effect","waves-light",2,"height","50px","background-color","#6f19e6",3,"click"],[1,"divider"],[1,"divider-text"],["type","submit",1,"btn","btn-white","border","w-100","waves-effect","waves-light",2,"height","50px",3,"click"],[1,"bx","bxl-google","font-size-18","align-middle","me-2"],[1,"bx","bxl-windows","font-size-18","align-middle","me-2"],[1,"mt-4","text-center"],["class","mb-0",4,"ngIf"],[1,"invalid-feedback"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"bx","bx-loader","bx-spin","font-size-16","align-middle","me-2"],[1,"mb-0"]],template:function(o,m){o&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12),p(12,he,50,9,"div",13)(13,xe,1,0,"app-skelleton-login",14),n()()()()()()()()(),i(14,"div",4)(15,"div",15)(16,"video",16,0),s(18," Tu navegador no soporta el elemento de video. "),n()()()()()()),o&2&&(r(12),a("ngIf",!m.charge),r(),a("ngIf",m.charge),r(3),a("src","assets/videos/login3.mp4",F))},dependencies:[z,Q,P,D,q,K,B,ne],styles:['.divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin:1.5rem 0}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex:1;border-bottom:1px solid #ddd}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 1rem;color:#000;font-size:.9rem;font-weight:500}.auth-bg[_ngcontent-%COMP%]{position:relative;height:100vh;overflow:hidden;display:flex;align-items:center;justify-content:center;opacity:.75;background:#000}.auth-video[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:1}']})}}return t})();var _e=[{path:"login",component:oe}],Je=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=V({imports:[O,j.forChild(_e),W,J,$]})}}return t})();export{Je as a};
