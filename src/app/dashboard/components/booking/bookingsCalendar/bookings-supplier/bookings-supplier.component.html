

<div class="calendar-canvas calendar-weekly mt-0 no-border no-box-shadow animated fadeIn fast" id="calendar-weekly-header">
    <div class="calendar-container">
        <table class="calendar-table">
            <thead>
                <tr>
                    <th class="time-header"><p class="font-size-24 mt-3 fw-lighter"><i class="bx bx-time"></i></p></th>
                    <th class="day-header pe-1 ps-1 pb-2" *ngFor="let supplier of suppliers">
                        <div class="day-header-content">
                            <div class="card w-100 bg-dark p-2 pt-3 card-supplier text-center">
                                <div class="supplier-info">
                                    <div class="supplier-name mb-1">
                                        <p class="font-size-14 fw-semibold text-white mb-0">{{ supplier.companyName }}</p>
                                    </div>
                                    <div class="supplier-rating" *ngIf="supplier.rating">
                                        <div class="d-flex align-items-center justify-content-center">
                                            <i class="bx bxs-star text-warning me-1" style="font-size: 12px;"></i>
                                            <span class="font-size-12 text-muted">{{ supplier.rating }}</span>
                                            <i class="bx bx-check-circle text-success ms-1" 
                                               *ngIf="supplier.isVerified" 
                                               style="font-size: 12px;" 
                                               title="Verificado"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </th>
                </tr>
            </thead>
        </table>
    </div>
</div>

<div class="calendar-canvas calendar-body mt-0 no-border no-box-shadow animated fadeIn fast">
    <div class="calendar-container">
        <table class="calendar-table mt-1">
            <thead>
                <tr style="height: 0px !important; padding: 0px !important; margin: 0px !important;">
                    <th class="time-header" style="height: 0px !important; padding: 0px !important; margin: 0px !important;"></th>
                    <th class="day-header" *ngFor="let supplier of suppliers" style="height: 0px !important; padding: 0px !important; margin: 0px !important;">
                        <div style="height: 0px !important; padding: 0px !important; margin: 0px !important;" class="day-header-content">
                            <div style="height: 0px !important; padding: 0px !important; margin: 0px !important;" class="card w-100 bg-light p-1 pt-2 card-supplier text-center">
                                <div style="height: 0px !important; padding: 0px !important; margin: 0px !important;" class="supplier-info">
                                    <p style="height: 0px !important; padding: 0px !important; margin: 0px !important;" class="font-size-16 text-light fw-normal mb-1">{{ supplier.companyName }}</p>
                                </div>
                            </div>
                        </div>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="time-row" *ngFor="let hour of getHoursRange()">
                    <td class="time-cell">
                        <span class="time-label fw-semibold">{{ formatHour(hour.toString()) }}</span>
                    </td>
                    <td class="day-cell" 
                        *ngFor="let supplier of suppliers" 
                        [attr.data-hour]="hour" 
                        [attr.data-supplier]="supplier.id"
                        (click)="openBookingModal(supplier.id, hour)">
                        <div class="cell-content">
                            <div class="booking-item" 
                                 *ngFor="let booking of getBookingsForSupplierAndHour(supplier.id, hour)"
                                 [class.multiple-services]="booking.services && booking.services.length > 1"
                                 [style.background-color]="booking.services?.[0]?.color || '#23324d'"
                                 [title]="getBookingTooltip(booking)">
                                <div class="booking-info">
                                    <!-- Horario y precio -->
                                    <div class="booking-time-price d-flex justify-content-between align-items-center mb-2">
                                        <span class="text-white booking-time">{{ booking.startTime | timeOnly }} - {{ booking.endTime | timeOnly }}</span>
                                        <span class="text-white booking-price fw-bold">${{ booking.totalPrice }}</span>
                                    </div>
                                    
                                    <!-- Cliente -->
                                    <div class="booking-customer-info d-flex align-items-center mb-2">
                                        <img class="rounded-circle header-profile-user me-2" width="20" height="20" [src]="booking.customer.photo" alt="Header Avatar">
                                        <span class="text-white customer-name">{{ booking.customer.firstName }} {{ booking.customer.lastName }}</span>
                                    </div>

                                    <!-- Servicios como badges -->
                                    <div class="services-badges">
                                        <span class="badge badge-service me-1 mb-1" 
                                              *ngFor="let service of booking.services; let i = index"
                                              [style.background-color]="i === 0 ? 'rgba(255,255,255,0.9)' : 'rgba(255,255,255,0.7)'"
                                              [style.color]="booking.services?.[0]?.color || '#23324d'">
                                            {{ service.serviceName }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

