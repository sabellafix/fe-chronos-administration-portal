
<div class="calendar-canvas calendar-body mt-4 no-border no-box-shadow animated fadeIn fast">
    <div class="calendar-container">
        <table class="calendar-table mt-1">
            <tbody>
                <tr class="time-row"  *ngFor="let hour of getHoursRange()">
                    <td class="day-cell" 
                        *ngFor="let space of spaces" 
                        [attr.data-hour]="hour" 
                        [attr.data-space]="space.id"
                        [class.central-cell]="isCentralCell(space.id, hour)"
                        (click)="openBookingModal(space.id, hour)">
                        <div class="cell-content">
                            <!-- Contenedor para el modelo 3D en la celda central -->
                            <div *ngIf="isCentralCell(space.id, hour)" 
                                 class="threejs-container" 
                                 #threejsContainer>
                            </div>
                            
                            <!-- Contenido normal de las celdas -->
                            <ng-container *ngIf="!isCentralCell(space.id, hour)">
                                <!-- <div class="booking-item" 
                                    *ngFor="let booking of getBookingsForDateTime(space.id, hour)"
                                     [style.background-color]="booking.services?.[0]?.color || '#23324d'"
                                     [title]="'Cliente: ' + booking.customerId + ' | ' + formatHour(booking.startTime.hour) + ' - ' + formatHour(booking.endTime.hour)">
                                    <div class="booking-info">
                                        <span class="text-white booking-customer">{{booking.services?.[0]?.serviceName || 'Sin servicio'}}</span> 
                                        <span class="text-white booking-time mb-2">{{formatHour(booking.startTime.hour)}} - {{formatHour(booking.endTime.hour)}}</span>
                                        <span class="text-white booking-price mb-2">${{booking.totalPrice}}</span>
                                        <span class="booking-customer-photo d-flex align-items-start">
                                            <img class="rounded-circle header-profile-user" width="20" height="20" [src]="booking.customer.photo" alt="Header Avatar">
                                            <p class="text-white ms-2 mt-2">{{booking.customer.firstName}} {{booking.customer.lastName}}</p>
                                        </span>
                                    </div>
                                </div> -->
                            </ng-container>
                        </div>
                    </td>
                    <th class="time-hedaer-space"></th>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<!-- Offcanvas para crear booking -->
<app-offcanvas-create-booking 
  (bookingCreated)="onBookingCreated($event)"
  (cancelled)="onBookingCancelled()">
</app-offcanvas-create-booking>